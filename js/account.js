var signin = document.getElementById('sign-in');
var account = document.getElementById('account');
var account2 = document.getElementById('account2');
var btnsign = document.getElementById('btnsign');
var close = document.getElementById('close');
var Rclose = document.getElementById('r-close');
var signs = document.getElementById('signs');
var signs2 = document.getElementById('signs2');
var crt = document.getElementById('crt');
var create = document.getElementById('create');
var create2 = document.getElementById('create2');
var signout = document.getElementById('signout');
var signout2 = document.getElementById('signout2');
var message = document.getElementById('message');
var forgot = document.getElementById('forgot');
var fmail = document.getElementById('fmail');
var aname = document.getElementById('aname');
var alos = document.getElementById('alos');
var send = document.getElementById('send');
var m1 = document.getElementById('m1');
var m2 = document.getElementById('m2');
var m3 = document.getElementById('m3');
var m4 = document.getElementById('m4');
var fmailInput = document.getElementById('fMailInput');
var updatea = document.getElementById('update');
var klarnafak = document.getElementById('klarnafak');
var cls = document.getElementById('cls');
var acc = document.getElementById('acc');
var avbryt = document.getElementById('avbryt');
var nmne = document.getElementById('nmne');
var dhlfrakt = document.getElementById('dhlfrakt');
var postfrakt = document.getElementById('postfrakt');
var notFree = document.getElementById('notFree');
var losenbnk = document.getElementById('lsn');
var pbkg = document.getElementById('pbkg');
var pclose = document.getElementById('pclose');
var pout = document.getElementById('pout');
var guest = document.getElementById('guest');
var plogin = document.getElementById('plogin');
var ppass = document.getElementById('ppass');
var pprice = document.getElementById('pprice');
var vbkg = document.getElementById('vbkg');
var cnummer = document.getElementById('cnummer');
var utg = document.getElementById('utg');
var utg2 = document.getElementById('utg2');
var vtotals = document.getElementById('vtotals');
var conf = document.getElementById('conf');
var avb = document.getElementById('avb');
var betal = document.getElementById('betal');
var last = document.getElementById('last');
var last2 = document.getElementById('last2');
var sbkg = document.getElementById('sbkg');
var checkout = document.getElementById('checkout');
var ifnot = document.getElementById('ifnot');
var hearttop = document.getElementById('hearttop');
var heartbottom = document.getElementById('heartbottom');
var saved = document.getElementById('saved');
var sclose = document.getElementById('sclose');
var empty2 = document.getElementById('empty2');
var empty = document.getElementById('empty');
var move = document.getElementsByClassName('move');
var move2 = document.getElementsByClassName('move2');
var contactUs = document.getElementById('contact-us');
var meddelandeInput = document.getElementById('meddelandeInput');
var namnInput = document.getElementById('namnInput');
var epostInput = document.getElementById('epostInput');
var updates = document.getElementById('updates');
var swrapper = document.getElementById('swrapper');
var url = document.getElementById('url').innerHTML;
var stotal = document.getElementById('stotal');
var kr = document.getElementById('kr');
var krt = document.getElementById('krt');
var cbkg = document.getElementById('cbkg');
var cred = document.getElementById('cred');
var gta = document.getElementById('gta');
var std = document.getElementById('std');
var ptnr = document.getElementById('ptnr');
var tlnr = document.getElementById('tlnr');
var jump = document.getElementById('jump');
var wish = document.getElementById('wish');
var myclose = document.getElementById('myclose');
var c13 = document.getElementById('c13');
var totalpris = document.getElementById('totalpris');
var mysum = document.getElementsByClassName('sum2');
var dropbkg = document.getElementsByClassName('dropbkg');
var base1 = document.getElementById('base1');
var bas1 = document.getElementById('bas1');
var dropinner = document.getElementsByClassName('dropinner');
var base1 = document.getElementById('base1');
var lappar = document.getElementById('lappar');
var ogon = document.getElementById('ogon');
var penslar = document.getElementById('penslar');
var har = document.getElementById('har');
var contents = document.getElementById('content')
var showall = document.getElementById('showall')
/* PRODUCTS */
var buy = document.getElementById('buynow');
var proName = document.getElementById('pro-name');
var price = document.getElementById('price').innerHTML;
var productImage = document.getElementById('mainp').innerHTML;
var minih2 = document.getElementById('mini').innerHTML;
var productName = document.getElementById('productNames').innerHTML;
var antal = document.getElementById('antal');
var artnum = document.getElementById('artNr').innerHTML;
var artnr = document.getElementsByClassName('artnr');
var proname = document.getElementsByClassName('pro-name');
var sum = document.getElementsByClassName('sum');
var image = document.getElementsByClassName('img');
var underrubrik = document.getElementsByClassName('under');
var antlpr = document.getElementsByClassName('numbers');
var adresses = document.getElementsByClassName('urlen');
var xxx = document.getElementsByClassName('products');
/*Checkout */
var totalDiscount = document.getElementById('disc');
var validmsg = document.getElementById('validmsg');
var rabattMsg = document.getElementById('rabattMsg');
var rabattBtn = document.getElementById('rabatt');
var checkoutbtn = document.getElementById('shop-icon');
var fornamns = document.getElementById('fnames');
var telefonnr = document.getElementById('tlnr');
var efnamn = document.getElementById('lnames');
var gata = document.getElementById('gata');
var stad = document.getElementById('stad');
var postnummer = document.getElementById('postnummer');
var maila = document.getElementById('emailsc');
var fornamns2 = document.getElementById('fnames2');
var telefonnr2 = document.getElementById('tlnr2');
var efnamn2 = document.getElementById('lnames2');
var gata2 = document.getElementById('gata2');
var stad2 = document.getElementById('stad2');
var postnummer2 = document.getElementById('postnummer2');
var maila2 = document.getElementById('emailsc2');
var closes = document.getElementById('close-x');
var rabattkod = document.getElementById('rabattkod');
var postnord = document.getElementById('postnord');
var dhl = document.getElementById('dhl');
var cost = document.getElementById('cost'); // DHL HEMLEVERANS
var visa = document.getElementById('visa'); // VISA & MASTERCARD BETALNING
var paypal = document.getElementById('paypal');
var klarna = document.getElementById('klarna');
var add = document.getElementById('add'); // LÄGG TILL TILL ANTAL
var remove = document.getElementById('remove'); // TA BORT FRÅN ANTAL
var img1 = document.getElementById('img');
var pris1 = document.getElementById('sum');
var num1 = document.getElementById('numbers');
var inside = document.getElementById('prdcts');
var tabort = document.getElementById('tabort');
var tabort2 = document.getElementById('tabort2');
var adds = document.getElementsByClassName('add'); // LÄGG TILL TILL ANTAL
var removes = document.getElementsByClassName('remove'); // TA BORT FRÅN ANTAL
var totals = document.getElementById('total'); // HELA SUMMAN
/* LOCAL STORAGE */
var fname = document.getElementById('fname');
var lname = document.getElementById('lname');
var emaila = document.getElementById('email');
var username = document.getElementById('username');
var password = document.getElementById('password');
var password2 = document.getElementById('password2');
var userInput = document.getElementById('usernameS');
var userPass = document.getElementById('passwordS');
/* LOCAL STORAGE CREATE ACCOUNT */
var fornamn = localStorage.getItem("firstName");
var efternamen = localStorage.getItem("LastName");
var email = localStorage.getItem("e-mail");
var anvandarnamn = localStorage.getItem("uName");
var losenord = localStorage.getItem("pword");
var pstnr = localStorage.getItem("pstnr");
var stadens = localStorage.getItem("stada");
var gatans = localStorage.getItem("gatan");
var tlfner = localStorage.getItem("tlfn");
var radion = document.getElementById('radio1');
var testis = localStorage.getItem("clicks");
var banr = document.getElementsByClassName('banner1')
wrapper.onclick = function () {
jump.style.display = 'block';
jump.scrollIntoView();
}
/* BUY PRODUCTS */
var buyIt2 = JSON.parse(localStorage.getItem("carts"));
var buyIt = JSON.parse(localStorage.getItem("cart"));
if (buyIt == null) { buyIt = []; }
inside.style.border = 'none';
buy.onclick = function () {
    if (antal.value == '') {
        validmsg.innerHTML = 'Fyll i önskat antal';
    } else {
        numOfItems = 1;
        for (var i = 0; i < buyIt.length; i++) {
            if (minih2 == buyIt[i].underrub) {
                antal.value = parseInt(buyIt[i].antalprodukter) + parseInt(antal.value, 10);
                buyIt.splice(i, 1);
            }
        }
        buyIt.push({
            artId: artnum,
            artName: productName,
            artCost: price,
            artImage: productImage,
            underrub: minih2,
            nums: numOfItems,
            antalprodukter: antal.value,
            adress: url
        });
        var jsonStr = JSON.stringify(buyIt);
        localStorage.setItem("cart", jsonStr);
    };
    buyIt.forEach(function (key) {
        var addr = key.adress;
        var produktNamn = key.artName;
        var produktBild = key.artImage;
        var pris = key.artCost;
        var antalprodukter = key.antalprodukter;
        cbkg.innerHTML = '<a href="/' + addr + '.html"><div class="cimage">' + produktBild + '</div></a><div class="cdesc">' + '  <h1>' + produktNamn + '</h1><h1> Antal: ' + antalprodukter + 'st</h1>' + '  <h2>À Pris: ' + pris + ',00kr</h2>' + '</div>';
    })
    var timer = null;
    window.clearTimeout(timer);
    timer = window.setTimeout(function () {
        checkoutbtn.style.fontSize = '140%';
        checkoutbtn.style.color = '#bb9d97';
        checkoutbtn.style.transition = '0.1s ease-out';
        cbkg.style.transition = '0.2s ease-in-out';
        cbkg.style.opacity = '1';
    }, 0);
    timer = window.setTimeout(function () {
        window.location.reload();
        checkoutbtn.style.fontSize = '100%';
        checkoutbtn.style.color = '#ffffff';
        cbkg.style.opacity = '0';
        cbkg.style.transition = '0.2s ease-in-out';
    }, 1500);
    test();
    showCheckout();
}
test();
showCheckout();
/*SAVE PRODUCTS */
var save = JSON.parse(localStorage.getItem("saveit"));
if (save == null) { save = []; }
inside.style.border = 'none';
heartbottom.onclick = function () {
    numOfItems = 1;
    for (var i = 0; i < save.length; i++) {
        if (artnum == save[i].artId) {
            antal.value = parseInt(save[i].antalprodukter) + parseInt(antal.value, 10);
            save.splice(i, 1);
        }
    }
    save.push({
        artId: artnum,
        artName: productName,
        artCost: price,
        artImage: productImage,
        underrub: minih2,
        nums: numOfItems,
        antalprodukter: antal.value,
        adress: url
    });
    var jsonStr = JSON.stringify(save);
    localStorage.setItem("saveit", jsonStr);
    save.forEach(function (key) {
        var addr = key.adress;
        var produktNamn = key.artName;
        var produktBild = key.artImage;
        var pris = key.artCost;
        var antalprodukter = key.antalprodukter;
        cbkg2.innerHTML = '<a href="/' + addr + '.html"><div class="cimage2">' + produktBild + '</div></a><div class="cdesc2">' + '  <h1>' + produktNamn + '</h1><h1> Antal: ' + antalprodukter + 'st</h1>' + '  <h2>À Pris: ' + pris + ',00kr</h2>' + '</div>';
    })
    var timer = null;
    window.clearTimeout(timer);
    timer = window.setTimeout(function () {
        hearttop.style.fontSize = '150%';
        hearttop.style.color = '#bb9d97';
        hearttop.style.transition = '0.1s ease-out';
        cbkg2.style.transition = '0.2s ease-in-out';
        cbkg2.style.opacity = '1';
    }, 0);
    timer = window.setTimeout(function () {
        window.location.reload();
        hearttop.style.fontSize = '100%';
        hearttop.style.color = '#ffffff';
        cbkg2.style.opacity = '0';
        cbkg2.style.transition = '0.2s ease-in-out';
    }, 1500);
}
if (save == '') {
    swrapper.innerHTML = '<p id="snow"> Önskelistan är tom</p>';
    c13.innerHTML = '<h2>Önskelistan är tom</h2>';
    saved.style.overflow = 'hidden';
    empty2.style.display = 'none';
    empty.style.display = 'none';
    for (var i = 0; i < move.length; i++) {
        move[i].style.display = 'none';
    }
    for (var i = 0; i < move2.length; i++) {
        move2[i].style.display = 'none';
    }
}
if (save != '') {
    save.forEach(function (key) {
        var addr = key.adress;
        var produktNamn = key.artName;
        var produktBild = key.artImage;
        var pris = key.artCost;
        var antalprodukter = key.antalprodukter;
        swrapper.innerHTML += '<a href="/' + addr + '.html"><div class="simage">' + produktBild + '</div></a><div class="sdesc">' + '  <h1>' + produktNamn + '</h1><h1> Antal: ' + antalprodukter + 'st</h1>' + '  <h2>Pris: ' + pris + ',00kr</h2>' + '</div>';
        heartbottom.style.display = 'none';
    })
}
empty.onclick = function () {
    window.location.reload();
    localStorage.removeItem('saveit');
}
sclose.onclick = function () {
    var timer = null;
    window.clearTimeout(timer);
    timer = window.setTimeout(function () {
        saved.style.display = 'none';
    }, 0);
}
$('#hearttop').click(function (event) {
    saved.style.display = 'block';
    $('html').one('click', function () {
        saved.style.display = 'none';
    });
    event.stopPropagation();
});
/* BUY PRODUCTS */
function test() {

    if (buyIt != '') {
        inside.innerHTML = '<h2>' + 'Dina varor' + '</h2>'
 
        buyIt.forEach(function (key) {
      
            var produktNamn = key.artName;
            var produktBild = key.artImage;
            var pris = key.artCost;
            var antalprodukter = key.antalprodukter;
            var underh2 = key.underrub;
            var artikelnamn = key.artId;
            var urls = key.adress;
        
            inside.innerHTML += '<div class="products">' +
                '<a href="' + urls + '"><div class=" urlen">' + urls + '</div><h3 class="pro-name2">' + produktNamn + ' </h3></a>' + '<h4 class="under">' + underh2 + '</h4><div class="artfill">Art. nr: </div> <h5 class="artnr"> ' + artikelnamn + '</h5>' +
                '<div class="img">' + produktBild + '</div>' +  '<p class="number">Antal:</p> <input class="numbers" type"text" value="' + antalprodukter + '"</input>' +
                '<p class="sum">' + pris + '</p><p class="sumfill"> kr</p>' +
               '<div class="minus">Ta bort produkt</div>' + '</div>';
            }) 
    } else {
        inside.innerHTML = "<h2>Kassan är tom</h2>";
        inside.style.border = "none";
        kr.style.display = 'none';
        krt.style.display = 'none';
        cred.style.display = 'none';
    };
    showCheckout();
}
var artnr = document.getElementsByClassName('artnr');
var pronames = document.getElementsByClassName('pro-name2');
var sum = document.getElementsByClassName('sum');
var image = document.getElementsByClassName('img');
var underrubrik = document.getElementsByClassName('under');
var antlpr = document.getElementsByClassName('numbers');
var adresses = document.getElementsByClassName('urlen');
var xxx = document.getElementsByClassName('products');
/* REMOVE SPECIFIC ITEM */
$('.minus').on('click', function () {
    $(this).closest(".products").remove();
    var newCart = [];
    for (var i = 0; i < adresses.length; i++) {
        for (var i = 0; i < antlpr.length; i++) {
            for (var i = 0; i < underrubrik.length; i++) {
                for (var i = 0; i < image.length; i++) {
                    for (var i = 0; i < sum.length; i++) {
                        for (var i = 0; i < pronames.length; i++) {
                            for (var i = 0; i < artnr.length; i++) {
                                newCart.push({
                                    artId: artnr[i].innerHTML,
                                    artName: pronames[i].innerHTML,
                                    artCost: sum[i].innerHTML,
                                    artImage: image[i].innerHTML,
                                    underrub: underrubrik[i].innerHTML,
                                    antalprodukter: antlpr[i].value,
                                    adress: adresses[i].innerHTML
                                });
                            }
                        }
                    }
                }
            }
        }
    }
    var jsonStore = JSON.stringify(newCart);
    localStorage.setItem('cart', jsonStore);
    var sums = 0;
    for (var i = 0; i < antlpr.length; i++) {
        for (var i = 0; i < sum.length; i++) {
            var itemCost = parseInt(sum[i].innerHTML);
            var itemSumCost = 0;
            if (antlpr[i].value > 1) {
                var count = parseInt(antlpr[i].value);
                for (var j = 0; j < count; j++) {
                    sums += itemCost;
                    itemSumCost += itemCost;
                }
            } else {
                sums += itemCost;
                itemSumCost = itemCost;
            }
            ifnot.innerHTML = sums;
            if (sums > 499) {
                notFree.innerHTML = ', gratis'
            }else {
                notFree.innerHTML = ', 39kr'
            }
            postnord.onclick = function () {
                if (postnord.checked == true && sums > 499) {
                    var prc = sums;
                    totals.innerHTML = Math.round(prc);
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'block';
                    ifnot.style.display = 'none';
                    kr.style.display = 'none';
                    krt.style.display = 'none';
                    visa.scrollIntoView();
                } else {
                    var prc = sums + 39;
                    totals.innerHTML = Math.round(prc)
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'block';
                    ifnot.style.display = 'none';
                    kr.style.display = 'none';
                    krt.style.display = 'none';
                    visa.scrollIntoView();
                }
                if (postnord.checked == false && sums > 499) {
                    var prc = sums;
                    totals.innerHTML = Math.round(prc);
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'none';
                    ifnot.style.display = 'inline';
                    kr.style.display = 'inline';
                    krt.style.display = 'inline';
                    visa.scrollIntoView();
                } if (postnord.checked == false && sums < 499) {
                    var prc = sums + 39;
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    totals.innerHTML = Math.round(prc);
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'none';
                    ifnot.style.display = 'inline';
                    kr.style.display = 'inline';
                    krt.style.display = 'inline';
                    visa.scrollIntoView();
                }
            }
            dhl.onclick = function () {
                if (dhl.checked == true) {
                    var prc = sums + 69;
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    totals.innerHTML = Math.round(prc);
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'block';
                    ifnot.style.display = 'none';
                    kr.style.display = 'none';
                    krt.style.display = 'none';
                    visa.scrollIntoView();
                } if (dhl.checked == false) {
                    var prc = sums + 69;
                    totals.innerHTML = Math.round(prc);
                    betal.style.display = 'none';
                    ifnot.style.display = 'inline';
                    kr.style.display = 'inline';
                    krt.style.display = 'inline';
                }
            }
            /* IF DISCOUNT BTN IS CHECKED */
            rabattBtn.onclick = function () {
                if (rabattkod.value == '') {
                    rabattMsg.innerHTML = 'Rabattkoden är inte giltlig'
                    totalDiscount.innerHTML = '';
                    totals.innerHTML = Math.round(sums);
                }
                if (rabattkod.value == '2018' && dhl.checked == true && postnord.checked == false) {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                    totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.1) + ',00kr';
                    var prc = sums * 0.9 + 69;
                    totals.innerHTML = Math.round(prc);
                }
                if (rabattkod.value == '2018' && dhl.checked == false && postnord.checked == true) {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                    totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.1) + ',00kr';
                    var prc = sums * 0.9;
                    totals.innerHTML = Math.round(prc);
                }
                if (rabattkod.value == '3333' && dhl.checked == true && postnord.checked == false) {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                    totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.2) + ',00kr';
                    var prc = sums * 0.8 + 69;
                    totals.innerHTML = Math.round(prc);
                }
                if (rabattkod.value == '3333' && dhl.checked == false && postnord.checked == true) {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                    totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.1) + ',00kr';
                    var prc = sums * 0.8;
                    totals.innerHTML = Math.round(prc);
                }
                if (rabattkod.value == '2018' || rabattkod.value == '3333') {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                } else {
                    totalDiscount.innerHTML = '';
                    totals.innerHTML = sums;
                    rabattMsg.innerHTML = 'Rabattkoden är inte giltlig!'
                }
            }
        }
    }
});
/* Update if value change */
$(document).ready(function() {
    $('.numbers').on('change', function() {
        var newCart = [];
 
        for(var i = 0; i< antlpr.length; i++){
            if(antlpr[i].value == ''){
                antlpr[i].value = 1;
            } 
            if(antlpr[i].value == 0){
                $(this).closest(".products").remove();
             
            }
           if(inside.innerHTML == '<h2>Dina varor</h2>'){
              not.style.display= 'none';
              cred.style.display= 'none';
              betal.style.display= 'none';
              removeall.style.display= 'none';
              inside.innerHTML = '<h2>Kassan är tom</h2>'
           }

        }
        for (var i = 0; i < adresses.length; i++) {
            for (var i = 0; i < antlpr.length; i++) {
                for (var i = 0; i < underrubrik.length; i++) {
                    for (var i = 0; i < image.length; i++) {
                        for (var i = 0; i < sum.length; i++) {
                            for (var i = 0; i < pronames.length; i++) {
                                for (var i = 0; i < artnr.length; i++) {
                                    newCart.push({
                                        artId: artnr[i].innerHTML,
                                        artName: pronames[i].innerHTML,
                                        artCost: sum[i].innerHTML,
                                        artImage: image[i].innerHTML,
                                        underrub: underrubrik[i].innerHTML,
                                        antalprodukter: antlpr[i].value,
                                        adress: adresses[i].innerHTML
                                    });
                                }
                            }
                        }
                    }
                }
            }
        }
        var jsonStore = JSON.stringify(newCart);
        localStorage.setItem('cart', jsonStore);
        var sums = 0;
        for (var i = 0; i < antlpr.length; i++) {
            for (var i = 0; i < sum.length; i++) {
                var itemCost = parseInt(sum[i].innerHTML);
                var itemSumCost = 0;
                if (antlpr[i].value > 1) {
                    var count = parseInt(antlpr[i].value);
                    for (var j = 0; j < count; j++) {
                        sums += itemCost;
                        itemSumCost += itemCost;
                    }
                } else {
                    sums += itemCost;
                    itemSumCost = itemCost;
                }
                ifnot.innerHTML = sums;
                if (sums > 499) {
                    notFree.innerHTML = ', gratis'
                }else {
                    notFree.innerHTML = ', 39kr'
                }
                postnord.onclick = function () {
                    if (postnord.checked == true && sums > 499) {
                        var prc = sums;
                        totals.innerHTML = Math.round(prc);
                        vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                        pprice.innerHTML = Math.round(prc) + ',00 kr';
                        betal.style.display = 'block';
                        ifnot.style.display = 'none';
                        kr.style.display = 'none';
                        krt.style.display = 'none';
                        visa.scrollIntoView();
                    } else {
                        var prc = sums + 39;
                        totals.innerHTML = Math.round(prc)
                        vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                        pprice.innerHTML = Math.round(prc) + ',00 kr';
                        betal.style.display = 'block';
                        ifnot.style.display = 'none';
                        kr.style.display = 'none';
                        krt.style.display = 'none';
                        visa.scrollIntoView();
                    }
                    if (postnord.checked == false && sums > 499) {
                        var prc = sums;
                        totals.innerHTML = Math.round(prc);
                        vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                        pprice.innerHTML = Math.round(prc) + ',00 kr';
                        betal.style.display = 'none';
                        ifnot.style.display = 'inline';
                        kr.style.display = 'inline';
                        krt.style.display = 'inline';
                        visa.scrollIntoView();
                    } if (postnord.checked == false && sums < 499) {
                        var prc = sums + 39;
                        vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                        totals.innerHTML = Math.round(prc);
                        pprice.innerHTML = Math.round(prc) + ',00 kr';
                        betal.style.display = 'none';
                        ifnot.style.display = 'inline';
                        kr.style.display = 'inline';
                        krt.style.display = 'inline';
                        visa.scrollIntoView();
                    }
                }
                dhl.onclick = function () {
                    if (dhl.checked == true) {
                        var prc = sums + 69;
                        vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                        totals.innerHTML = Math.round(prc);
                        pprice.innerHTML = Math.round(prc) + ',00 kr';
                        betal.style.display = 'block';
                        ifnot.style.display = 'none';
                        kr.style.display = 'none';
                        krt.style.display = 'none';
                        visa.scrollIntoView();
                    } if (dhl.checked == false) {
                        var prc = sums + 69;
                        totals.innerHTML = Math.round(prc);
                        betal.style.display = 'none';
                        ifnot.style.display = 'inline';
                        kr.style.display = 'inline';
                        krt.style.display = 'inline';
                    }
                }
                /* IF DISCOUNT BTN IS CHECKED */
                rabattBtn.onclick = function () {
                    if (rabattkod.value == '') {
                        rabattMsg.innerHTML = 'Rabattkoden är inte giltlig'
                        totalDiscount.innerHTML = '';
                        totals.innerHTML = Math.round(sums);
                    }
                    if (rabattkod.value == '2018' && dhl.checked == true && postnord.checked == false) {
                        rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                        totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.1) + ',00kr';
                        var prc = sums * 0.9 + 69;
                        totals.innerHTML = Math.round(prc);
                    }
                    if (rabattkod.value == '2018' && dhl.checked == false && postnord.checked == true) {
                        rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                        totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.1) + ',00kr';
                        var prc = sums * 0.9;
                        totals.innerHTML = Math.round(prc);
                    }
                    if (rabattkod.value == '3333' && dhl.checked == true && postnord.checked == false) {
                        rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                        totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.2) + ',00kr';
                        var prc = sums * 0.8 + 69;
                        totals.innerHTML = Math.round(prc);
                    }
                    if (rabattkod.value == '3333' && dhl.checked == false && postnord.checked == true) {
                        rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                        totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.1) + ',00kr';
                        var prc = sums * 0.8;
                        totals.innerHTML = Math.round(prc);
                    }
                    if (rabattkod.value == '2018' || rabattkod.value == '3333') {
                        rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                    } else {
                        totalDiscount.innerHTML = '';
                        totals.innerHTML = sums;
                        rabattMsg.innerHTML = 'Rabattkoden är inte giltlig!'
                    }
                }
            }
        }
    });
});
function savedItems() {
    if (save.length > 0) {
        var sum = 0;
        for (var i = 0; i < save.length; i++) {
            var itemCost = parseInt(save[i].artCost);
            var itemSumCost = 0;
            if (save[i].antalprodukter > 1) {
                var count = parseInt(save[i].antalprodukter);
                for (var j = 0; j < count; j++) {
                    sum += itemCost;
                    itemSumCost += itemCost;
                }
            } else {
                sum += itemCost;
                itemSumCost = itemCost;
            }
        }
        stotal.innerHTML = '<p>Totalt: ' + sum + ',00kr </p>';
        for (var i = 0; i < move.length; i++) {
            move[i].onclick = function () {
                var timer = null;
                window.clearTimeout(timer);
                timer = window.setTimeout(function () {
                    checkoutbtn.style.fontSize = '150%';
                    checkoutbtn.style.color = '#bb9d97';
                    checkoutbtn.style.transition = '0.1s ease-out';
                }, 0);
                timer = window.setTimeout(function () {
                    checkoutbtn.style.fontSize = '100%';
                    checkoutbtn.style.color = '#ffffff';
                }, 1000);




save.forEach(function (key) {

            tabort.style.display = 'block';
            swrapper.innerHTML = '<p id="snow">Önskelistan finns nu i kassan</p>';
            c13.innerHTML = '<h2>Önskelistan finns nu i kassan</h2>';
            stotal.innerHTML = '';
            var produktNamn = key.artName;
            var produktBild = key.artImage;
            var pris = key.artCost;
            var antalprodukter = key.antalprodukter;
            var underh2 = key.underrub;
            var artikelnamn = key.artId;
            var urls = key.adress;
            //inside.innerHTML = '';
            inside.innerHTML += '<div class="products">' +
            '<a href="' + urls + '"><div class=" urlen">' + urls + '</div><h3 class="pro-name2">' + produktNamn + ' </h3></a>' + '<h4 class="under">' + underh2 + '</h4><div class="artfill">Art. nr: </div> <h5 class="artnr"> ' + artikelnamn + '</h5>' +
            '<div class="img">' + produktBild + '</div>' +  '<p class="number">Antal:</p> <input class="numbers" type"text" value="' + antalprodukter + '"</input>' +
            '<p class="sum">' + pris + '</p><p class="sumfill"> kr</p>' +
           '<div class="minus">Ta bort produkt</div>' + '</div>';

})



                var artnr = document.getElementsByClassName('artnr');
                var pronames = document.getElementsByClassName('pro-name2');
                var sum = document.getElementsByClassName('sum');
                var image = document.getElementsByClassName('img');
                var underrubrik = document.getElementsByClassName('under');
                var antlpr = document.getElementsByClassName('numbers');
                var adresses = document.getElementsByClassName('urlen');
                var xxx = document.getElementsByClassName('products');
                var newCart = [];
                for (var i = 0; i < adresses.length; i++) {
                    for (var i = 0; i < antlpr.length; i++) {
                        for (var i = 0; i < underrubrik.length; i++) {
                            for (var i = 0; i < image.length; i++) {
                                for (var i = 0; i < sum.length; i++) {
                                    for (var i = 0; i < pronames.length; i++) {
                                        for (var i = 0; i < artnr.length; i++) {
                                            newCart.push({
                                                artId: artnr[i].innerHTML,
                                             artName: pronames[i].innerHTML,
                                              artCost: sum[i].innerHTML,
                                            artImage: image[i].innerHTML,
                                              underrub: underrubrik[i].innerHTML,
                                             antalprodukter: antlpr[i].value,
                                             adress: adresses[i].innerHTML
                                            });
                                        }
                                    }
                                }
                            }
                        }
                    }
                }

       
                var jsonStore = JSON.stringify(newCart);
                localStorage.setItem('cart', jsonStore);
     window.location.reload();
            
        }}
        for (var i = 0; i < move2.length; i++) {
            move2[i].onclick = function () {
                var timer = null;
                window.clearTimeout(timer);
                timer = window.setTimeout(function () {
                    checkoutbtn.style.fontSize = '150%';
                    checkoutbtn.style.color = '#bb9d97';
                    checkoutbtn.style.transition = '0.1s ease-out';
                }, 0);
                timer = window.setTimeout(function () {
                    checkoutbtn.style.fontSize = '100%';
                    checkoutbtn.style.color = '#ffffff';
                }, 1000);
                save.forEach(function (key) {
                    tabort.style.display = 'block';
                    swrapper.innerHTML = '<p id="snow">Önskelistan finns nu i kassan</p>';
                    c13.innerHTML = '<h2>Önskelistan finns nu i kassan</h2>';
                    stotal.innerHTML = '';
                    var produktNamn = key.artName;
                    var produktBild = key.artImage;
                    var pris = key.artCost;
                    var antalprodukter = key.antalprodukter;
                    var underh2 = key.underrub;
                    var artikelnamn = key.artId;
                    var urls = key.adress;
                    inside.innerHTML += '<div class="products">' +
                    '<a href="' + urls + '"><div class=" urlen">' + urls + '</div><h3 class="pro-name2">' + produktNamn + ' </h3></a>' + '<h4 class="under">' + underh2 + '</h4><div class="artfill">Art. nr: </div> <h5 class="artnr"> ' + artikelnamn + '</h5>' +
                    '<div class="img">' + produktBild + '</div>' +  '<p class="number">Antal:</p> <input class="numbers" type"text" value="' + antalprodukter + '"</input>' +
                    '<p class="sum">' + pris + '</p><p class="sumfill"> kr</p>' +
                   '<div class="minus">Ta bort produkt</div>' + '</div>';
        })
                var artnr = document.getElementsByClassName('artnr');
                var pronames = document.getElementsByClassName('pro-name2');
                var sum = document.getElementsByClassName('sum');
                var image = document.getElementsByClassName('img');
                var underrubrik = document.getElementsByClassName('under');
                var antlpr = document.getElementsByClassName('numbers');
                var adresses = document.getElementsByClassName('urlen');
                var xxx = document.getElementsByClassName('products');
                var newCart = [];
                for (var i = 0; i < adresses.length; i++) {
                    for (var i = 0; i < antlpr.length; i++) {
                        for (var i = 0; i < underrubrik.length; i++) {
                            for (var i = 0; i < image.length; i++) {
                                for (var i = 0; i < sum.length; i++) {
                                    for (var i = 0; i < pronames.length; i++) {
                                        for (var i = 0; i < artnr.length; i++) {
                                            newCart.push({
                                                artId: artnr[i].innerHTML,
                                                artName: pronames[i].innerHTML,
                                                artCost: sum[i].innerHTML,
                                                artImage: image[i].innerHTML,
                                                underrub: underrubrik[i].innerHTML,
                                                antalprodukter: antlpr[i].value,
                                                adress: adresses[i].innerHTML
                                            });
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                var jsonStore = JSON.stringify(newCart);
                localStorage.setItem('cart', jsonStore);
         window.location.reload();
            }
        }}
} savedItems();
hearttop.onclick = function () {
    var timer = null;
    window.clearTimeout(timer);
    timer = window.setTimeout(function () {
        saved.style.display = 'inline';
    }, 0);
}
if (buyIt == 0 && save == '') {
    kr.style.display = 'none';
    krt.style.display = 'none';
    ifnot.style.display = 'none';
} else {
    kr.style.display = 'inline';
    krt.style.display = 'inline';
}
/* Visa kassan */
function showCheckout() {
    var artnr = document.getElementsByClassName('artnr');
    var pronames = document.getElementsByClassName('pro-name2');
    var sum = document.getElementsByClassName('sum');
    var image = document.getElementsByClassName('img');
    var underrubrik = document.getElementsByClassName('under');
    var antlpr = document.getElementsByClassName('numbers');
    var adresses = document.getElementsByClassName('urlen');
    var xxx = document.getElementsByClassName('products');
    var newCart = [];
    for (var i = 0; i < adresses.length; i++) {
        for (var i = 0; i < antlpr.length; i++) {
            for (var i = 0; i < underrubrik.length; i++) {
                for (var i = 0; i < image.length; i++) {
                    for (var i = 0; i < sum.length; i++) {
                        for (var i = 0; i < pronames.length; i++) {
                            for (var i = 0; i < artnr.length; i++) {
                                newCart.push({
                                    artId: artnr[i].innerHTML,
                                    artName: pronames[i].innerHTML,
                                    artCost: sum[i].innerHTML,
                                    artImage: image[i].innerHTML,
                                    underrub: underrubrik[i].innerHTML,
                                    antalprodukter: antlpr[i].value,
                                    adress: adresses[i].innerHTML
                                });
                            }
                        }
                    }
                }
            }
        }
    }
    var jsonStore = JSON.stringify(newCart);
    localStorage.setItem('cart', jsonStore);
/*
for (var i = 0; i <antlpr.length; i++ ){
    updates.style.display = 'inline';
    updates.innerHTML = '&nbsp;'+antlpr[i].value+'&nbsp;';
}*/
    var sums = 0;
    for (var i = 0; i < antlpr.length; i++) {
        for (var i = 0; i < sum.length; i++) {
            var itemCost = parseInt(sum[i].innerHTML);
            var itemSumCost = 0;
            if (antlpr[i].value > 1) {
                var count = parseInt(antlpr[i].value);
                for (var j = 0; j < count; j++) {
                    sums += itemCost;
                    itemSumCost += itemCost;
                }
            } else {
                sums += itemCost;
                itemSumCost = itemCost;
            }
            ifnot.innerHTML = sums;
        /* DISPLAY SUM WHEN SHIPPING ALTERNATIVE IS CHOOSEN */
        /* CAN ONLY CHECK ONE /SHIPPING ) */
        (function ($) {
            $(document).ready(function () {
                $('input.box1').on('change', function () {
                    $('input.box1').not(this).prop('checked', false).val("N");
                    $(this).val(this.checked ? 'Y' : 'N');
                });
            });
        })(jQuery);
        if (sums > 499) {
            notFree.innerHTML = ', gratis'
        }else {
            notFree.innerHTML = ', 39kr'
        }
            postnord.onclick = function () {
                if (postnord.checked == true && sums > 499) {
                    var prc = sums;
                    totals.innerHTML = Math.round(prc);
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'block';
                    ifnot.style.display = 'none';
                    kr.style.display = 'none';
                    krt.style.display = 'none';
                    visa.scrollIntoView();
                } else {
                    var prc = sums + 39;
                    totals.innerHTML = Math.round(prc)
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'block';
                    ifnot.style.display = 'none';
                    kr.style.display = 'none';
                    krt.style.display = 'none';
                    visa.scrollIntoView();
                }
                if (postnord.checked == false && sums > 499) {
                    var prc = sums;
                    totals.innerHTML = Math.round(prc);
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'none';
                    ifnot.style.display = 'inline';
                    kr.style.display = 'inline';
                    krt.style.display = 'inline';
                    visa.scrollIntoView();
                } if (postnord.checked == false && sums < 499) {
                    var prc = sums + 39;
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    totals.innerHTML = Math.round(prc);
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'none';
                    ifnot.style.display = 'inline';
                    kr.style.display = 'inline';
                    krt.style.display = 'inline';
                    visa.scrollIntoView();
                }
            }
            dhl.onclick = function () {
                if (dhl.checked == true) {
                    var prc = sums + 69;
                    vtotals.innerHTML = 'Totalt: ' + Math.round(prc) + ',00 kr';
                    totals.innerHTML = Math.round(prc);
                    pprice.innerHTML = Math.round(prc) + ',00 kr';
                    betal.style.display = 'block';
                    ifnot.style.display = 'none';
                    kr.style.display = 'none';
                    krt.style.display = 'none';
                    visa.scrollIntoView();
                } if (dhl.checked == false) {
                    var prc = sums + 69;
                    totals.innerHTML = Math.round(prc);
                    betal.style.display = 'none';
                    ifnot.style.display = 'inline';
                    kr.style.display = 'inline';
                    krt.style.display = 'inline';
                }
            }
            /* IF DISCOUNT BTN IS CHECKED */
            rabattBtn.onclick = function () {
                if (rabattkod.value == '') {
                    rabattMsg.innerHTML = 'Rabattkoden är inte giltlig'
                    totalDiscount.innerHTML = '';
                    totals.innerHTML = Math.round(sums);
                }
                if (rabattkod.value == '2018' && dhl.checked == true && postnord.checked == false) {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                    totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.1) + ',00kr';
                    var prc = sums * 0.9 + 69;
                    totals.innerHTML = Math.round(prc);
                }
                if (rabattkod.value == '2018' && dhl.checked == false && postnord.checked == true) {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                    totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.1) + ',00kr';
                    var prc = sums * 0.9;
                    totals.innerHTML = Math.round(prc);
                }
                if (rabattkod.value == '3333' && dhl.checked == true && postnord.checked == false) {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                    totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.2) + ',00kr';
                    var prc = sums * 0.8 + 69;
                    totals.innerHTML = Math.round(prc);
                }
                if (rabattkod.value == '3333' && dhl.checked == false && postnord.checked == true) {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                    totalDiscount.innerHTML = 'Erhållen rabatt: ' + Math.round(sums * 0.1) + ',00kr';
                    var prc = sums * 0.8;
                    totals.innerHTML = Math.round(prc);
                }
                if (rabattkod.value == '2018' || rabattkod.value == '3333') {
                    rabattMsg.innerHTML = 'Rabattkoden är godkänd!'
                } else {
                    totalDiscount.innerHTML = '';
                    totals.innerHTML = sums;
                    rabattMsg.innerHTML = 'Rabattkoden är inte giltlig!'
                }
            }
        }
    /* CAN ONLY CHECK ONE (PAYMWNT) */
    (function ($) {
        $(document).ready(function () {
            $('input.box2').on('change', function () {
                $('input.box2').not(this).prop('checked', false).val("N");
                $(this).val(this.checked ? 'Y' : 'N');
            });
        });
    })(jQuery);
    /* VISA / MASTERCARD */
    visa.onclick = function () {
        vbkg.style.display = "block";
    }
    conf.onclick = function () {
        if (cnummer.value == '') {
            cnummer.focus();
        }
        else if (utg.value == '') {
            utg.focus();
        }
        else if (utg2.value == '') {
            utg2.focus();
        }
        else {
            vbkg.style.display = "none";
            last.style.display = 'inline-block';
            checkout.scrollIntoView();
        }
    }
    avb.onclick = function () {
        vbkg.style.display = "none";
        visa.checked = false;
        last.style.display = 'none';
    }
    /* PAYPAL */
    paypal.onclick = function () {
        pbkg.style.display = "block";
    }
    pclose.onclick = function () {
        pbkg.style.display = "none";
        paypal.checked = false;
        last.style.display = 'none';
    }
    guest.onclick = function () {
        pbkg.style.display = "none";
        last.style.display = 'inline-block';
        checkout.scrollIntoView();
    }
    pout.onclick = function () {
      
        if (plogin.value == '') {
            plogin.focus();
        }
        else if (ppass.value == '') {
            ppass.focus();
        }
        
        else {
        
           pbkg.style.display = "none";
           last.style.display = 'inline-block';
          checkout.scrollIntoView();
        }
    }
    /*KLARNA */
    klarna.onclick = function () {
        klarnafak.style.display = 'block';
        nmne.innerHTML = fornamn + ' ' + efternamen + ' - BankID på fil';
        if(nmne.innerHTML == 'null null - BankID på fil'){
          nmne.innerHTML = 'Ditt - BankID på fil';
 }

    }
    cls.onclick = function () {
        klarnafak.style.display = 'none';
        klarna.checked = false;
        last.style.display = 'none';
    }
    acc.onclick = function () {
        if (losenbnk.value == '') {
            losenbnk.focus();
        } else {
            klarnafak.style.display = 'none';
            last.style.display = 'inline-block';
            checkout.scrollIntoView();
        }
    }
    avbryt.onclick = function () {
        klarnafak.style.display = 'none';
        klarna.checked = false;
        last.style.display = 'none';
    }
}
    }
/* ON CHECKOUT BUTTON */
checkoutbtn.onclick = function () {

    document.getElementById('check-out').style.display = "inline-block";
    fornamns.value = fornamn;
    efnamn.value = efternamen;
    maila.value = email;
    telefonnr.value = tlfner;
    gata.value = gatans;
    stad.value = stadens;
    postnummer.value = pstnr;
    closes.style.display = 'block';
    var yepp = document.getElementsByClassName('yepp')
var nope = document.getElementsByClassName('nope')
var conf2 = document.getElementById('conf2')
    /* REMOVE ITEM */
    tabort.onclick = function () {
     conf2.style.display = 'block';
        conf2.innerHTML = '<div class="doyou"> <div class="dotext"><p>Vill du verkligen tömma kassan?</p></div>' + 
        '<div class="doyoubuttons"><button class="nope">Nej</button><button class="yepp">Ja</button></div></div>';
tabort.style.display = 'none';
       for(var i = 0; i < nope.length; i++){
        nope[i].onclick = function(){
            conf2.innerHTML = '';
            tabort.style.display = 'block';
       }
    }
    for(var i = 0; i < yepp.length; i++){
        yepp[i].onclick = function(){
            localStorage.removeItem('cart');
            conf.style.display = 'none';
            inside.innerHTML = "<h2>Kassan är tom</h2>";
            cred.style.display = 'none';
            inside.style.border = "none";
            tabort.style.display = 'none';
            ifnot.style.display = 'none';
            ifnot.style.display = 'none';
            kr.style.display = 'none';
            krt.style.display = 'none';
            cost.style.display = 'none';
            rabattBtn.style.display = 'none';
            betal.style.display = 'none';
       }
    }
}
    /* ON BUTTON CLOSE CHECKOUT */
    closes.onclick = function () {
        document.getElementById('check-out').style.top = "-120vh";
        document.getElementById('check-out').style.display = "none";
        closes.style.display = 'none';
        window.location.reload();
        kr.style.display = 'none';
        krt.style.display = 'none';
    };
};
checkout.onclick = function () {
    function ValidateEmail(){

        var email = $('#emailsc').val();
        if(email=="")
        {
            inputet.placeholder = 'Fyll i din E-post';
            $("#emailsc").focus();
            return false;
        }
        
        else if(email!="")
        {
            var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        
            if (!filter.test(email)) 
            {   
                emailsc.value = '';
                emailsc.placeholder = 'Ange en giltig E-postadress';
                $('#emailsc').focus();
                return false;
            }
        }
        }ValidateEmail();
        function checkInp()
        {
          var x=$('#telefon').val();
          if (isNaN(x)) 
          {
            telefon.value = '';
            telefon.placeholder = 'Ange enbart siffror';
            $('#telefon').focus();
        
            return false;
          }
        }
        checkInp();
        function checkInp2()
        {
          var x=$('#postnummer').val();
          if (isNaN(x)) 
          {
            postnummer.value = '';
            postnummer.placeholder = 'Ange enbart siffror';
            $('#postnummer').focus();
        
            return false;
          }
        }
        checkInp2();
    if (fnames.value == '') {
        fnames.focus();
        fnames.placeholder = 'Fyll i ditt namn'
    }
    else if (lnames.value == '') {
        lnames.focus();
        lnames.placeholder = 'Fyll i ditt efternamn'
    }
    else if (gata.value == '') {
        gata.focus();
        gata.placeholder = 'Fyll i din gata'
    }
    else if (postnummer.value == '') {
        checkInp2();
        postnummer.focus();
    }
    else if (stad.value == '') {
        stad.focus();
        stad.placeholder = 'Fyll i din stad'
    }
    else if (emailsc.value == '') {
        ValidateEmail();
        emailsc.focus();
        
    }
    else if (telefon.value == '') {
        checkInp();
        telefon.focus();

    } else {
        var timer = null;
        window.clearTimeout(timer);
        timer = window.setTimeout(function () {
            sbkg.style.display = 'block';
        }, 0);
        timer = window.setTimeout(function () {
            sbkg.style.display = 'none';
            kr.style.display = 'none';
            krt.style.display = 'none';
            inside.scrollIntoView();
            localStorage.removeItem('cart');
            inside.innerHTML = "<h2>Kassan är tom</h2>";
            inside.style.border = "none";
            cred.style.display = 'none';
        }, 3000);
    }
}
/************ SIG IN ***************/
/* ON CLICK "LOGGA IN" */
signs.onclick = function () {
    document.getElementById('sign-in').style.display = 'inline-block';
    close.style.display = 'block';
};
/* ON CLICK "LOGGA IN" */
signs2.onclick = function () {
    document.getElementById('sign-in').style.display = 'inline-block';
    close.style.display = 'block';
};
/* ON CLICK "LOGGA IN" WHEN DIV IS OPEN */
btnsign.onclick = function () {
    if (anvandarnamn == userInput.value && losenord == userPass.value) {
        document.getElementById('sign-in').style.display = 'none';
        signs.style.display = "none";
        signs2.style.display = "none";
        create.style.display = "none";
        create2.style.display = "none";
        send.style.display = "none";
        account.style.display = "inline";
        signout.style.display = "inline";
        account2.style.display = "inline";
        signout2.style.display = "inline";
        hearttop.style.display = 'inline';
        heartbottom.style.display = 'inline';
        close.style.display = 'none';
        var xt = true;
        window.localStorage.setItem('clicks', xt);
    } else {
        userPass.value = '';
        message.innerHTML = 'Felaktigt användarnamn eller lösenord.';
    }
};
/* ON CLICK "CLOSE" */
close.onclick = function () {
    document.getElementById('sign-in').style.display = 'none';
    close.style.display = 'none';
};
/* ON "GLÖMT LÖSENORD?" */
forgot.onclick = function () {
    alos.style.display = "none";
    btnsign.style.display = "none";
    aname.style.display = "none";
    userPass.style.display = "none"
    userInput.style.display = "none"
    fmail.style.display = "block";
    send.style.display = "block";
};
/* ON "GLÖMT LÖSENORD? -> SEND" */
send.onclick = function () {
    if (fmailInput.value != '' && fmailInput.value === email) {
        alos.style.display = "none";
        aname.style.display = "none";
        forgot.style.display = "none";
        fmail.style.display = "block";
        fmailInput.value = '';
        message.innerHTML = 'Ditt lösenord har skickats till din mail';
    } else {
        message.innerHTML = 'Skriv den epostadress som är kopplat till ditt konto';
    }
};
/* ON CLICK "LOGGA UT" */
signout.onclick = function () {
    create.style.display = "inline";
    signs.style.display = "inline";
    account.style.display = "none";
    create2.style.display = "inline";
    signs2.style.display = "inline";
    account2.style.display = "none";
    heartbottom.style.display = 'inline';
    signout.style.display = "none";
    signout2.style.display = "none";
    hearttop.style.display = 'inline';
    var xt = false;
    window.localStorage.setItem('clicks', xt);
};
/* ON CLICK "LOGGA UT" */
signout2.onclick = function () {
    create.style.display = "inline";
    signs.style.display = "inline";
    account.style.display = "none";
    create2.style.display = "inline";
    signs2.style.display = "inline";
    account2.style.display = "none";
    heartbottom.style.display = 'inline';
    signout.style.display = "none";
    signout2.style.display = "none";
    hearttop.style.display = 'inline';
    var xt = false;
    window.localStorage.setItem('clicks', xt);
};
/************ CREATE ACCOUNT ***************/
/* ON CLICK "REGISTRERA" */
create.onclick = function () {
    document.getElementById('register').style.display = 'inline-block';
    Rclose.style.display = 'block';
};
create2.onclick = function () {
    document.getElementById('register').style.display = 'inline-block';
    Rclose.style.display = 'block';
};
/* ON CLICK "SKAPA KONTO" WHEN DIV IS OPEN */
crt.onclick = function () {
    function ValidateEmail(){
        var email = $('#email').val();
        if(email=="")
        {
            inputet.placeholder = 'Fyll i din E-post';
            $("#email").focus();
            return false;
        }
        else if(email!="")
        {
            var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if (!filter.test(email)) 
            {   
                emaila.value = '';
                emaila.placeholder = 'Ange en giltig E-postadress';
                $('#email').focus();
                return false;
            } 
        }
        }ValidateEmail();
        function checkInp()
        {
          var x=$('#tlnr').val();
          if (isNaN(x)) 
          {
            tlnr.value = '';
            tlnr.placeholder = 'Ange enbart siffror';
            $('#tlnr').focus();
        
            return false;
          }
        }
        checkInp();
        function checkInp2()
        {
          var x=$('#ptnr').val();
          if (isNaN(x)) 
          {
            ptnr.value = '';
            ptnr.placeholder = 'Ange enbart siffror';
            $('#ptnr').focus();
        
            return false;
          }
        }
        checkInp2();
  
    if (fname.value == '') {
        fname.focus();
    } else if (lname.value == '') {
        lname.focus();
    } else if (gta.value == '') {
        gta.focus();
    } else if (std.value == '') {
        std.focus();
    } else if (ptnr.value == '') {
        checkInp2();
        ptnr.focus();
    } else if (tlnr.value == '') {
        checkInp();
        tlnr.focus();
    } else if (emaila.value == '') {
        ValidateEmail();
        emaila.focus();
    } else if (username.value == '') {
        username.focus();
    } else if (password.value == '') {
        password.focus();
    } else if (password2.value == '') {
        password2.focus();
    } else if (password.value != password2.value) {
        password2.focus();
        password2.value = '';
        password2.placeholder = 'Lösenorden matchar inte'
        password.value = '';
    }
    
    else {
        localStorage.setItem("firstName", fname.value);
        localStorage.setItem("LastName", lname.value);
        localStorage.setItem("e-mail", emaila.value);
        localStorage.setItem("uName", username.value);
        localStorage.setItem("pword", password.value);
        localStorage.setItem("gatan", gta.value);
        localStorage.setItem("stada", std.value);
        localStorage.setItem("postnr", ptnr.value);
        localStorage.setItem("tlfn", tlnr.value);
        document.getElementById('register').style.display = 'none';
        signs.style.display = "none";
        create.style.display = "none";
        account.style.display = "inline";
        signout.style.display = "inline";
        signs2.style.display = "none";
        create2.style.display = "none";
        account2.style.display = "inline";
        signout2.style.display = "inline";
        heartbottom.style.display = 'inline';
        var xt = true;
        window.localStorage.setItem('clicks', xt);
        window.location.reload();
    }
};
/* ON CLICK "CLOSE" */
Rclose.onclick = function () {
    Rclose.style.display = 'none';
    document.getElementById('register').style.display = 'none';
};
if (localStorage.getItem("clicks") === true) {
    document.getElementById('register').style.display = 'none';
    signs.style.display = "none";
    create.style.display = "none";
    signs2.style.display = "none";
    create2.style.display = "none";
    send.style.display = "none";
    account.style.display = "inline";
    signout.style.display = "inline";
    account2.style.display = "inline";
    signout2.style.display = "inline";
    hearttop.style.display = 'inline';
    heartbottom.style.display = 'inline';
}
/* STAY SIGNED IN */
if (JSON.parse(testis)) {
    signs.style.display = "none";
    create.style.display = "none";
    signs2.style.display = "none";
    create2.style.display = "none";
    send.style.display = "none";
    account.style.display = "inline";
    signout.style.display = "inline";
    account2.style.display = "inline";
    signout2.style.display = "inline";
    hearttop.style.display = 'inline';
    heartbottom.style.display = 'inline';
} else {
    signs.style.display = "inline";
    create.style.display = "inline";
    signs2.style.display = "inline";
    create2.style.display = "inline";
    send.style.display = "inline";
    account.style.display = "none";
    signout.style.display = "none";
    account2.style.display = "none";
    signout2.style.display = "none";
    hearttop.style.display = 'inline';
    heartbottom.style.display = 'inline';
}
if (ifnot.innerHTML == '') {
    ifnot.innerHTML = 0;
}
function myaccount() {
    account.onclick = function () {
        wish.style.display = 'block';
        myclose.style.display = 'block';
        fornamns2.value = fornamn;
        efnamn2.value = efternamen;
        maila2.value = email;
        telefonnr.value = tlfner;
        gata2.value = gatans;
        stad2.value = stadens;
        postnummer2.value = pstnr;
        save.forEach(function (key) {
            var produktNamn = key.artName;
            var produktBild = key.artImage;
            var pris = key.artCost;
            var antalprodukter = key.antalprodukter;
            var underh2 = key.underrub;
            var artikelnamn = key.artId;
            var urls = key.adress;
            c13.innerHTML += '<div class="products">' +
            '<a href="' + urls + '"><div class=" urlen">' + urls + '</div><h3 class="pro-name2">' + produktNamn + ' </h3></a>' + '<h4 class="under">' + underh2 + '</h4><div class="artfill">Art. nr: </div> <h5 class="artnr"> ' + artikelnamn + '</h5>' +
            '<div class="img">' + produktBild + '</div>' +  '<p class="number">Antal:</p> <input class="numbers" type"text" value="' + antalprodukter + '"</input>' +
            '<p class="sum">' + pris + '</p><p class="sumfill"> kr</p>' +
           '<div class="minus">Ta bort produkt</div>' + '</div>';
})
        if (save.length > 0) {
            var sum = 0;
            for (var i = 0; i < save.length; i++) {
                var itemCost = parseInt(save[i].artCost);
                var itemSumCost = 0;
                if (save[i].antalprodukter > 1) {
                    var count = parseInt(save[i].antalprodukter);
                    for (var j = 0; j < count; j++) {
                        sum += itemCost;
                        itemSumCost += itemCost;
                    }
                } else {
                    sum += itemCost;
                    itemSumCost = itemCost;
                }
                totalpris.innerHTML = '<h2>Totalt: ' + sum + ',00kr</h2>'
            }}
        }
}
myaccount();
function myaccount3() {
    account2.onclick = function () {
        wish.style.display = 'block';
        myclose.style.display = 'block';
        fornamns2.value = fornamn;
        efnamn2.value = efternamen;
        maila2.value = email;
        telefonnr.value = tlfner;
        gata2.value = gatans;
        stad2.value = stadens;
        postnummer2.value = pstnr;
        save.forEach(function (key) {
            var produktNamn = key.artName;
            var produktBild = key.artImage;
            var pris = key.artCost;
            var antalprodukter = key.antalprodukter;
            var underh2 = key.underrub;
            var artikelnamn = key.artId;
            var urls = key.adress;
            c13.innerHTML += '<div class="products">' +
            '<a href="' + urls + '"><div class=" urlen">' + urls + '</div><h3 class="pro-name2">' + produktNamn + ' </h3></a>' + '<h4 class="under">' + underh2 + '</h4>Art. nr:  <h5 class="artnr"> ' + artikelnamn + '</h5>' +
            '<div class="img">' + produktBild + '</div>' +
            '<p class="sum">' + pris + '</p><p class="sumfill"> kr</p>' +
            '<p class="number">Antal:</p> <div class="numbers">' + antalprodukter + '</div>'  + '</div>';
})
        if (save.length > 0) {
            var sum = 0;
            for (var i = 0; i < save.length; i++) {
                var itemCost = parseInt(save[i].artCost);
                var itemSumCost = 0;
                if (save[i].antalprodukter > 1) {
                    var count = parseInt(save[i].antalprodukter);
                    for (var j = 0; j < count; j++) {
                        sum += itemCost;
                        itemSumCost += itemCost;
                    }
                } else {
                    sum += itemCost;
                    itemSumCost = itemCost;
                }
                totalpris.innerHTML = '<h2>Totalt: ' + sum + ',00kr</h2>'
            }}
        }
}
myaccount3();
myclose.onclick = function () {
    wish.style.display = 'none';
    myclose.style.display = 'none';
    // window.location.reload();
}
empty2.onclick = function () {
    localStorage.removeItem('saveit');
    c13.innerHTML = '<h2>Önskelistan är tom</h2>';
}
/*****DROP DOWN MENU *******/
$('#bas1').click(function (event) {
    for (var i = 0; i < dropbkg.length; i++) {
        dropbkg[i].style.opacity = '1';
        dropbkg[i].style.transition = "0.5s ease-in-out";
        for (var i = 0; i < dropinner.length; i++) {
            dropinner[i].style.opacity = '1';
            dropinner[i].style.transition = "0.5s ease-in-out";
        }
        base1.style.display = 'block';
        lappar.style.display = 'none';
        ogon.style.display = 'none';
        penslar.style.display = 'none';
        har.style.display = 'none';
    }
    $('html').one('click', function () {
        for (var i = 0; i < dropbkg.length; i++) {
            dropbkg[i].style.opacity = '0';
            dropbkg[i].style.transition = "0.5s ease-in-out";
            for (var i = 0; i < dropinner.length; i++) {
                dropinner[i].style.opacity = '0';
                dropinner[i].style.transition = "0.5s ease-in-out";
            }
        }
    });
    event.stopPropagation();
});
$('#lappar1').click(function (event) {
    for (var i = 0; i < dropbkg.length; i++) {
        dropbkg[i].style.opacity = '1';
        dropbkg[i].style.transition = "0.5s ease-in-out";
        for (var i = 0; i < dropinner.length; i++) {
            dropinner[i].style.opacity = '1';
            dropinner[i].style.transition = "0.5s ease-in-out";
        }
        base1.style.display = 'none';
        lappar.style.display = 'block';
        ogon.style.display = 'none';
        penslar.style.display = 'none';
        har.style.display = 'none';
    }
    $('html').one('click', function () {
        for (var i = 0; i < dropbkg.length; i++) {
            dropbkg[i].style.opacity = '0';
            dropbkg[i].style.transition = "0.5s ease-in-out";
            for (var i = 0; i < dropinner.length; i++) {
                dropinner[i].style.opacity = '0';
                dropinner[i].style.transition = "0.5s ease-in-out";
            }
        }
    });
    event.stopPropagation();
});
$('#ogon1').click(function (event) {
    for (var i = 0; i < dropbkg.length; i++) {
        dropbkg[i].style.opacity = '1';
        dropbkg[i].style.transition = "0.5s ease-in-out";
        for (var i = 0; i < dropinner.length; i++) {
            dropinner[i].style.opacity = '1';
            dropinner[i].style.transition = "0.5s ease-in-out";
        }
        base1.style.display = 'none';
        lappar.style.display = 'none';
        ogon.style.display = 'block';
        penslar.style.display = 'none';
        har.style.display = 'none';
    }
    $('html').one('click', function () {
        for (var i = 0; i < dropbkg.length; i++) {
            dropbkg[i].style.opacity = '0';
            dropbkg[i].style.transition = "0.5s ease-in-out";
            for (var i = 0; i < dropinner.length; i++) {
                dropinner[i].style.opacity = '0';
                dropinner[i].style.transition = "0.5s ease-in-out";
            }
        }
    });
    event.stopPropagation();
});
$('#borstar1').click(function (event) {
    for (var i = 0; i < dropbkg.length; i++) {
        dropbkg[i].style.opacity = '1';
        dropbkg[i].style.transition = "0.5s ease-in-out";
        for (var i = 0; i < dropinner.length; i++) {
            dropinner[i].style.opacity = '1';
            dropinner[i].style.transition = "0.5s ease-in-out";
        }
        base1.style.display = 'none';
        lappar.style.display = 'none';
        ogon.style.display = 'none';
        penslar.style.display = 'block';
        har.style.display = 'none';
    }
    $('html').one('click', function () {
        for (var i = 0; i < dropbkg.length; i++) {
            dropbkg[i].style.opacity = '0';
            dropbkg[i].style.transition = "0.5s ease-in-out";
            for (var i = 0; i < dropinner.length; i++) {
                dropinner[i].style.opacity = '0';
                dropinner[i].style.transition = "0.5s ease-in-out";
            }
        }
    });
    event.stopPropagation();
});
$('#har1').click(function (event) {
    for (var i = 0; i < dropbkg.length; i++) {
        dropbkg[i].style.opacity = '1';
        dropbkg[i].style.transition = "0.5s ease-in-out";
        for (var i = 0; i < dropinner.length; i++) {
            dropinner[i].style.opacity = '1';
            dropinner[i].style.transition = "0.5s ease-in-out";
        }
        base1.style.display = 'none';
        lappar.style.display = 'none';
        ogon.style.display = 'none';
        penslar.style.display = 'none';
        har.style.display = 'block';
    }
    $('html').one('click', function () {
        for (var i = 0; i < dropbkg.length; i++) {
            dropbkg[i].style.opacity = '0';
            dropbkg[i].style.transition = "0.5s ease-in-out";
            for (var i = 0; i < dropinner.length; i++) {
                dropinner[i].style.opacity = '0';
                dropinner[i].style.transition = "0.5s ease-in-out";
            }
        }
    });
    event.stopPropagation();
});
/* CONTACT FORM UNDER "KONTAKTA OSS" */
function ifsend() {
    if (namnInput.value == '') {
        namnInput.focus();
        namnInput.placeholder = "Skriv ditt namn";
    }
    else if (epostInput.value == '') {
        epostInput.focus();
        epostInput.placeholder = "Skriv din epost";
    }
    else if (meddelandeInput.value == '') {
        meddelandeInput.focus();
        meddelandeInput.placeholder = "Skriv ditt meddelande";
    }
    else {
        contactUs.innerHTML = '<p>Tack för ditt meddelande, vi svarar så snabbt vi kan!</p>'
    }
}
if(buyIt == ''){
    not.style.display = 'none';
    tabort.style.display = 'none';
}
function allOfIt(){
    var xt2 = 0; 
        for(var i = 0; i < buyIt.length; i++){
    var xt3 = parseInt(buyIt[i].antalprodukter);
   xt2 += parseInt(buyIt[i].antalprodukter)
        updates.style.display= 'inline';
        updates.innerHTML = '&nbsp;'+xt2+'&nbsp;';
        }
}allOfIt();
/*
var artnr = document.getElementsByClassName('artnr');
for(var i = 0; i < artnr.length; i++){
    var arts = parseInt(artnr[i].innerHTML)
    var arts2 = [arts]
    if(arts == arts){
        $('.products').last().remove();
    }else {
      console.log(arts)
    }
}
*/
/*
var artnr = document.getElementsByClassName('artnr');
for(var i = 0; i < artnr.length; i++){
    var arts = parseInt(artnr[i].innerHTML)
  // $('.products').eq(-1).remove();
  console.log(arts)
  if(arts == arts*2){
      console.log(arts*2)
      $('.products').eq(1).remove();
  }
}
*/
/*
var charts = document.getElementsByClassName('artnr');
if(charts.length) {
    for(var i=0; i<charts.length; i++) {
        if(charts[i].innerHTML.includes('00025')) {
            charts[i].parentNode.style.display = 'none';
        }
    }
}
*/
/*
var divs = document.querySelectorAll(".products");
Array.from(divs).forEach(function(div) {
  if (div.textContent.indexOf("00064")!= -1 || div.textContent.indexOf("00025") != -1 ) {
    div.style.display = "none";
  }
});
*/
/*
var arr = buyIt;
var artids = buyIt.map(function (item) {
	return parseInt(item.artId);
});
var arrayUnique = function (arr) {
	return arr.filter(function(item, index){
		return arr.indexOf(item) >= index;
	});
};
var artidsUni = arrayUnique(artids);
*/
var arr = buyIt;
var artids = buyIt.map(function (item) {
    return parseInt(item.artId);
});
var arrayUnique = function (arr) {
    return arr.filter(function(item, index){
        return arr.indexOf(item) >= index;
    });
};
var artidsUni = arrayUnique(artids);
var ff = artidsUni;

console.log(ff)
var artnr = document.getElementsByClassName('artnr');
var proname = document.getElementsByClassName('pro-name');
var sum = document.getElementsByClassName('sum');
var image = document.getElementsByClassName('img');
var underrubrik = document.getElementsByClassName('under');
var antlpr = document.getElementsByClassName('numbers');
var adresses = document.getElementsByClassName('urlen');
var xxx = document.getElementsByClassName('products');
/*
var newCartss = [];
for (var i = 0; i < adresses.length; i++) {
    for (var i = 0; i < antlpr.length; i++) {
        for (var i = 0; i < underrubrik.length; i++) {
            for (var i = 0; i < image.length; i++) {
                for (var i = 0; i < sum.length; i++) {
                    for (var i = 0; i < proname.length; i++) {
                        for (var i = 0; i <ff.length; i++) {
                            newCartss.push({
                                artId: ff[i],
                                artName: pronames[i].innerHTML,
                                artCost: sum[i].innerHTML,
                                artImage: image[i].innerHTML,
                                underrub: underrubrik[i].innerHTML,
                                antalprodukter: antlpr[i].value,
                                adress: adresses[i].innerHTML
                            });
                        }
                    }
                }
            }
        }
    }
}
var jsonStore = JSON.stringify(newCartss);
localStorage.setItem('cart2', jsonStore);
            *//*
function tests() {
           var newCart = [];
           for (var i = 0; i < ff.length; i++) {
           for (var i = 0; i < adresses.length; i++) {
               for (var i = 0; i < antlpr.length; i++) {
                   for (var i = 0; i < underrubrik.length; i++) {
                       for (var i = 0; i < image.length; i++) {
                           for (var i = 0; i < sum.length; i++) {
                               for (var i = 0; i < pronames.length; i++) {
                                       newCart.push({
                                           artId: ff[i],
                                           artName: pronames[i].innerHTML,
                                           artCost: sum[i].innerHTML,
                                           artImage: image[i].innerHTML,
                                           underrub: underrubrik[i].innerHTML,
                                           antalprodukter: antlpr[i].value,
                                           adress: adresses[i].innerHTML
                                       });
                                   }
                               }
                           }
                       }
                   }
               }
           }
           var jsonStore = JSON.stringify(newCart);
           localStorage.setItem('cart', jsonStore);
        }
        tests();
      //  console.log(buyIt)
        var divs = document.querySelectorAll(".products");
    var sparseArray =buyIt,
    cleanArray = sparseArray.filter(function () { return true });
console.log(cleanArray); 
for(var i = 0; i< cleanArray.length; i++){
         $(cleanArray[i]).closest(".products").remove();
      //   console.log(cleanArray[i])
}
var pronames = document.getElementsByClassName('pro-name2');
var sum = document.getElementsByClassName('sum');
var image = document.getElementsByClassName('img');
var underrubrik = document.getElementsByClassName('under');
var antlpr = document.getElementsByClassName('numbers');
var adresses = document.getElementsByClassName('urlen');
var xxx = document.getElementsByClassName('products');
for(var i = 0; i< artnr.length; i++){
    var aa = artnr[i];
    var ab= artnr[i].innerHTML;
console.log(aa.innerHTML)
    if(aa.innerHTML == NaN){
    }
    if (isNaN(aa.innerHTML)) {
      //  var artnr = document.getElementsByClassName('artnr');
       //aa.outerHTML = '';
        $(this).parent().remove();
        console.log('ss')
    }
}
*/
/*
for(var i = 0; i <buyIt.length; i++){
var test = parseInt(buyIt[i].artId);

console.log(test)

if(test ===test){
   // alert('hej')
}
}

//console.log(buyIt)

function aaa(){
var arr = buyIt;
var artids = buyIt.map(function (item) {
    return parseInt(item.artId);
});
var arrayUnique = function (arr) {
    return arr.filter(function(item, index){
        return arr.indexOf(item) >= index;
    });
};
var artidsUni = arrayUnique(artids);
var ff = artidsUni;
$(this).closest(ff).remove();
console.log(this)
  }aaa();


  Array.prototype.removeIf = function(callback) {
    var i = this.length;
    while (i--) {
        if (callback(this[i], i)) {
            this.splice(i, 1);
        }
    }
};
*/
